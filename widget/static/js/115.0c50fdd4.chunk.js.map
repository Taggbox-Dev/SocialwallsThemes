{"version":3,"file":"static/js/115.0c50fdd4.chunk.js","mappings":"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","sources":["app/Themes/Elements/Media/Image.js","../node_modules/react-image-size/lib/index.js","../node_modules/react-image-size/lib/lib/constants.js","../node_modules/react-image-size/lib/lib/getImageSize.js","../node_modules/react-image-size/lib/lib/useImageSize.js"],"sourcesContent":["import React, { PureComponent } from \"react\";\nimport { POPUP_IMAGE_RENEW_REQUEST } from '../../../../actions/themeActions'\nimport { getImageSize } from 'react-image-size';\nimport { GET_MEDIA_NAME } from '../../../../utils'\nimport { CloudUrl } from \"../../../../constants\";\n\n\nexport default class Image extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadError: false,\n      imgUrl: this.props.data.postFileNew,\n      percentHeight: '100',\n      newSize: {\n        height: 100,\n        width: 100\n      },\n      mediaSize: {\n        height: 100,\n        width: 100\n      }\n    }\n    this.ImgWrap = React.createRef();\n  }\n\n  componentDidMount() {\n    this.updateDimensions();\n    if (!this.props.size) {\n      this.onMediaLoad();\n    }\n  }\n  updateDimensions = () => {\n    let newSize = this.ImgWrap.current.getBoundingClientRect();\n    if (newSize) {\n      this.setState({\n        newSize: {\n          height: newSize.height.toFixed(),\n          width: newSize.width.toFixed()\n        }\n      });\n    }\n  };\n\n  onMediaLoad = async (props) => {\n    const { data } = this.props;\n    const { imgUrl } = this.state;\n    if (data && Object.keys(data).length > 0 && [4, 5, 3].includes(data.type)) {\n      if (data.mediaHeight && data.mediaHeight != \"\" && data.mediaWidth && data.mediaWidth != \"\") {\n        this.setState({\n          mediaSize: {\n            height: data.mediaHeight,\n            width: data.mediaWidth,\n          }\n        })\n      } else {\n        try {\n          const { width, height } = await getImageSize(imgUrl);\n          this.setState({\n            mediaSize: {\n              height: height,\n              width: width,\n            }\n          })\n        } catch (error) {\n          this.setState({\n            loadError: true,\n            mediaSize: {\n              height: 100,\n              width: 100\n            }\n          })\n        }\n      }\n    }\n  }\n\n  onLoad = event => {\n    if (event.target.getAttribute(\"data-load\") == 1) this.setState({ imgUrl: event.target.src })\n  }\n\n\n  render() {\n    const { ImageClass, data, wallID, themeID, ownerId, size } = this.props\n    const { imgUrl, newSize, mediaSize } = this.state\n\n    const imageStyle = {\n      paddingBottom: size ? `${size}%` : (mediaSize.height * 100) / mediaSize.width + '%'\n    };\n\n    return <div className={`${ImageClass}_wrap_ mediaHolder${data.id}`} style={imageStyle} ref={this.ImgWrap}>\n      <img\n        className={ImageClass}\n        role=\"img\"\n        src={imgUrl}\n        //data-src={imgUrl}\n        height={300}\n        width={300}\n        data-link={data.link}\n        data-load=\"0\"\n        data-network={data.network.id}\n        data-wall-id={wallID}\n        data-owner-id={ownerId}\n        data-item-id={data.id}\n        data-filter-id={data.filterId}\n        theme-id={themeID}\n        onLoad={this.onLoad}\n        onError={!data.stories ? (e) => {\n          e.target.src = `${CloudUrl}/media/images/no-image.svg`\n          POPUP_IMAGE_RENEW_REQUEST(e)\n        } : null}\n        alt={GET_MEDIA_NAME(imgUrl)}\n      />\n    </div>\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useImageSize = exports.getImageSize = exports.Error = void 0;\nvar constants_1 = require(\"./lib/constants\");\nObject.defineProperty(exports, \"Error\", { enumerable: true, get: function () { return constants_1.ErrorMessage; } });\nvar getImageSize_1 = require(\"./lib/getImageSize\");\nObject.defineProperty(exports, \"getImageSize\", { enumerable: true, get: function () { return getImageSize_1.getImageSize; } });\nvar useImageSize_1 = require(\"./lib/useImageSize\");\nObject.defineProperty(exports, \"useImageSize\", { enumerable: true, get: function () { return useImageSize_1.useImageSize; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ErrorMessage = void 0;\nexports.ErrorMessage = {\n    WINDOW_IS_NOT_DEFINED: 'Window is not defined',\n    URL_IS_NOT_DEFINED: 'Url is not defined',\n    TIMEOUT: 'Timeout',\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getImageSize = void 0;\nconst constants_1 = require(\"./constants\");\nconst getImageSize = (url, options = {}) => {\n    return new Promise((resolve, reject) => {\n        if (typeof window === 'undefined') {\n            return reject(constants_1.ErrorMessage.WINDOW_IS_NOT_DEFINED);\n        }\n        if (!url) {\n            return reject(constants_1.ErrorMessage.URL_IS_NOT_DEFINED);\n        }\n        let timer = null;\n        const img = new Image();\n        img.addEventListener('load', () => {\n            if (timer) {\n                window.clearTimeout(timer);\n            }\n            resolve({ width: img.naturalWidth, height: img.naturalHeight });\n        });\n        img.addEventListener('error', (event) => {\n            if (timer) {\n                window.clearTimeout(timer);\n            }\n            reject(`${event.type}: ${event.message}`);\n        });\n        img.src = url;\n        if (options.timeout) {\n            timer = window.setTimeout(() => reject(constants_1.ErrorMessage.TIMEOUT), options.timeout);\n        }\n    });\n};\nexports.getImageSize = getImageSize;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useImageSize = void 0;\nconst react_1 = require(\"react\");\nconst getImageSize_1 = require(\"./getImageSize\");\nconst useImageSize = (url, options) => {\n    const [dimensions, setDimensions] = (0, react_1.useState)(null);\n    const [loading, setLoading] = (0, react_1.useState)(false);\n    const [error, setError] = (0, react_1.useState)(null);\n    (0, react_1.useEffect)(() => {\n        const fetch = () => __awaiter(void 0, void 0, void 0, function* () {\n            setLoading(true);\n            setDimensions(null);\n            try {\n                const { width, height } = yield (0, getImageSize_1.getImageSize)(url, options);\n                setDimensions({ width, height });\n            }\n            catch (error) {\n                setError(error.toString());\n            }\n            finally {\n                setLoading(false);\n            }\n        });\n        fetch();\n    }, [url, options]);\n    return [dimensions, { loading, error }];\n};\nexports.useImageSize = useImageSize;\n"],"names":["Image","PureComponent","constructor","props","super","updateDimensions","newSize","this","ImgWrap","current","getBoundingClientRect","setState","height","toFixed","width","onMediaLoad","async","data","imgUrl","state","Object","keys","length","includes","type","mediaHeight","mediaWidth","mediaSize","getImageSize","error","loadError","onLoad","event","target","getAttribute","src","postFileNew","percentHeight","React","componentDidMount","size","render","ImageClass","wallID","themeID","ownerId","imageStyle","paddingBottom","className","id","style","ref","role","link","network","filterId","onError","stories","e","CloudUrl","POPUP_IMAGE_RENEW_REQUEST","alt","GET_MEDIA_NAME","exports","constants_1","require","getImageSize_1","defineProperty","enumerable","get","useImageSize_1","value","ErrorMessage","WINDOW_IS_NOT_DEFINED","URL_IS_NOT_DEFINED","TIMEOUT","url","options","Promise","resolve","reject","window","timer","img","addEventListener","clearTimeout","naturalWidth","naturalHeight","message","timeout","setTimeout","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","then","apply","useImageSize","react_1","dimensions","setDimensions","useState","loading","setLoading","setError","useEffect","toString"],"sourceRoot":""}