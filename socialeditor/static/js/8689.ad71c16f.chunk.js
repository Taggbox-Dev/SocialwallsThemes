"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8689],{88689:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var a=t(9950),i=t(14478),l=t(11127),s=t(52867),r=t(80415),o=t(66345),d=t(78213),u=t(44414);const g=a.lazy(()=>t.e(2804).then(t.bind(t,2804))),c=a.lazy(()=>t.e(726).then(t.bind(t,80726))),h=a.lazy(()=>t.e(693).then(t.bind(t,50693))),p=a.lazy(()=>t.e(501).then(t.bind(t,40501))),m=a.lazy(()=>Promise.all([t.e(1397),t.e(56)]).then(t.bind(t,70056))),v=a.lazy(()=>Promise.all([t.e(8400),t.e(6337)]).then(t.bind(t,65518)));class b extends a.PureComponent{constructor(){super(),this.handleResize=()=>{this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}})},this.onLoadSpotLight=()=>{if(o.aD&&!o.yR){const{postData:n}=this.props;if(n.completeDataObject&&Object.keys(n.completeDataObject).length>0){var e=null;Object.entries(n.completeDataObject).forEach(n=>{let[t,a]=n;1==(null===a||void 0===a?void 0:a.highlight)&&null==e&&(e=a)}),e&&Object.keys(e).length>0&&(0,d.ar)(e)}}},this.state={containerSize:{width:null,height:null},parentID:""},this.containerRef=a.createRef()}componentDidMount(){(0,s.j1)(this.props.wall.Personalization.widgetTheme),window.addEventListener("resize",this.handleResize),this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}}),this.onLoadSpotLight()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}componentDidUpdate(){var e;let n=document.querySelector(".tb_app_container"),t=s.wV?s.wV:null===n||void 0===n||null===(e=n.parentNode)||void 0===e?void 0:e.id;this.setState({parentID:t})}render(){var e,n,t,i,l,d,b,k,f,S,j,w,B;const{wall:x,reviewFilters:D,webFilters:z,postData:_,languageSetting:y,filter_tags:I,spotlight:R,keyRender:T}=this.props,P=!!(x.Banner&&Object.keys(x.Banner).length>0&&(1===x.Banner.status&&1===x.Banner.banner_position||1===(null===x||void 0===x||null===(e=x.BannerImage)||void 0===e?void 0:e.status)||"1"===x.Banner.banner_position)),C=!!(x.Banner&&Object.keys(x.Banner).length>0&&(1===x.Banner.status&&2===x.Banner.banner_position||"2"===x.Banner.banner_position)),F=o.uS?![55,60,16,47,57].includes(x.Personalization.widgetTheme):![55,52,60,16,47,57,61].includes(x.Personalization.widgetTheme),U=!!(x.Banner&&Object.keys(x.Banner).length>0&&1===x.Banner.status&&6==x.Banner.bannerType&&0===x.Personalization.filterStatus&&57!=x.Personalization.widgetTheme),H=o.uS?1===x.Personalization.filterStatus:!!(z&&z.length>1),L=!!(I&&I.length>0),O=!(!o.aD||!R.status);let W=""!=z&&z&&z.length>0?z.map(e=>{let{Network:n}=e;return n.id}):null;!o.HY&&null!==x&&void 0!==x&&null!==(n=x.Background)&&void 0!==n&&n.image&&x.Background.image.includes(r.vr)&&(x.Background.image=String(x.Background.image).replace(r.Vy,""));const N=0===(null===x||void 0===x||null===(t=x.Background)||void 0===t?void 0:t.transparent)||null!==x&&void 0!==x&&null!==(i=x.Background)&&void 0!==i&&i.image&&o.uS?{backgroundImage:null!==x&&void 0!==x&&null!==(l=x.Background)&&void 0!==l&&l.image?`url(${x.Background.image})`:"",backgroundColor:null===x||void 0===x||null===(d=x.Background)||void 0===d?void 0:d.color}:null;return(0,u.jsxs)("div",{className:"tb_app_container "+(R.isWall?"":"tb_spotlight_ac"),style:{minHeight:o.yR?([47,16,49,55,60,52].includes(x.Personalization.widgetTheme),"100%"):null},ref:this.containerRef,children:[o.aD&&!o.Vn&&1===(null===(b=x.CustomTicker)||void 0===b?void 0:b.status)&&1==x.CustomTicker.ticker_position?(0,u.jsx)(h,{CustomTicker:x.CustomTicker,UgcSettings:x.UgcSettings}):null,P&&!O?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(g,{Banner:x.Banner,BannerImage:x.BannerImage,LogoImage:x.LogoImage})]}):"",(0,u.jsxs)("div",{className:"tb_app_wrapper",style:N,children:[U&&P?(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(c,{reviewFilters:D,appendData:_.appendData,wall:x,languageSetting:y,postData:_})}):null,"88"!=x.Personalization.widgetTheme&&(null!==x&&void 0!==x&&null!==(k=x.UserRule)&&void 0!==k&&k.on_site_upload&&null!==x&&void 0!==x&&null!==(f=x.UgcSettings)&&void 0!==f&&f.onsite_status||o.Qy&&null!==x&&void 0!==x&&null!==(S=x.UgcSettings)&&void 0!==S&&S.onsite_status&&(o.MH||o.HY&&!(0,s.Nv)(50)))?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(v,{UgcSettings:null===x||void 0===x?void 0:x.UgcSettings,id:null===x||void 0===x||null===(j=x.Wall)||void 0===j?void 0:j.id,tagShopWallId:null===x||void 0===x||null===(w=x.Wall)||void 0===w?void 0:w.wallId})," "]}):null,!o.aD&&F&&(H||L)?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(p,{type:x.Personalization.filter_type,webFilters:z,filter_tags:I,appendData:_.appendData,wall:x,languageSetting:y,postData:_})]}):"",!o.aD||!R.isWall&&O?null:(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(m,{...this.props,brandingNetworks:W,containerSize:this.state.containerSize,parentID:this.state.parentID},T)]}),U&&C?(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(c,{reviewFilters:D,appendData:_.appendData,wall:x,languageSetting:y,postData:_})}):null]}),C&&!O?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(g,{Banner:x.Banner,BannerImage:x.BannerImage,LogoImage:x.LogoImage})]}):"",o.aD&&!o.Vn&&1===(null===(B=x.CustomTicker)||void 0===B?void 0:B.status)&&2==x.CustomTicker.ticker_position?(0,u.jsx)(h,{CustomTicker:x.CustomTicker,UgcSettings:x.UgcSettings}):null]})}}const k=(0,l.Ng)(e=>{if(!0===e.postHeight.manage_height){return{postHeight:e.postHeight.data.replace("px",""),renderId:e.renderId}}return{renderId:e.renderId}},e=>({managePostHeight:n=>e((0,i.V3)(n))}))(b)}}]);